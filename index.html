<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HLH Official Staff Portal</title>
    <!-- Favicon: Inline SVG as Data URI -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%238b5cf6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z'%3E%3C/path%3E%3C/svg%3E">
    <!-- Google Fonts - Inter, Roboto, Open Sans, Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif; /* Default font */
        }
        /* Custom scrollbar for dark mode */
        .dark ::-webkit-scrollbar {
            width: 8px;
        }
        .dark ::-webkit-scrollbar-track {
            background: #333;
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #777;
        }
        /* Style for SVG icons */
        .icon-svg {
            width: 20px; /* Adjust size as needed */
            height: 20px; /* Adjust size as needed */
            fill: currentColor; /* Inherit text color */
        }
        .icon-svg-lg {
            width: 32px; /* Adjust size as needed */
            height: 32px; /* Adjust size as needed */
            fill: currentColor; /* Inherit text color */
        }
        /* Animated Gradient Background for Menu Screen */
        @keyframes gradient-xy {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }
        .animate-gradient-xy {
            background-size: 400% 400%;
            animation: gradient-xy 15s ease infinite;
        }

        /* Floating Triangle Animation - Now with rotation and fade for regeneration effect */
        @keyframes float-triangle {
            0% { transform: translate(0, 0) rotate(0deg) scale(0.8); opacity: 0; } /* Start invisible */
            10% { opacity: 0.2; } /* Fade in */
            25% { transform: translate(25vw, 15vh) rotate(90deg) scale(1.0); opacity: 0.3; }
            50% { transform: translate(0, 30vh) rotate(180deg) scale(0.9); opacity: 0.25; }
            75% { transform: translate(-25vw, 15vh) rotate(270deg) scale(1.1); opacity: 0.15; } /* Start fading out */
            90% { opacity: 0; } /* Fully faded out */
            100% { transform: translate(0, 0) rotate(360deg) scale(0.8); opacity: 0; } /* End invisible, ready to restart */
        }

        .floating-triangle {
            position: absolute;
            border-radius: 10px; /* Rounded corners for triangles */
            filter: blur(2px); /* Soft blur effect */
            animation: float-triangle 20s ease-in-out infinite;
            transform-origin: center center;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%); /* Triangle shape */
        }

        /* Holographic Text Animation */
        @keyframes holographic-glow {
            0% {
                color: #a78bfa; /* purple-400 */
                text-shadow: 0 0 5px #a78bfa, 0 0 10px #a78bfa, 0 0 15px #c084fc;
            }
            25% {
                color: #c084fc; /* purple-500 */
                text-shadow: 0 0 8px #c084fc, 0 0 15px #c084fc, 0 0 20px #e879f9;
            }
            50% {
                color: #e879f9; /* purple-600 */
                text-shadow: 0 0 10px #e879f9, 0 0 20px #e877f9, 0 0 25px #f0abfc;
            }
            75% {
                color: #c084fc; /* purple-500 */
                text-shadow: 0 0 8px #c084fc, 0 0 15px #c084fc, 0 0 20px #e879f9;
            }
            100% {
                color: #a78bfa; /* purple-400 */
                text-shadow: 0 0 5px #a78bfa, 0 0 10px #a78bfa, 0 0 15px #c084fc;
            }
        }
        .holographic-text {
            animation: holographic-glow 4s infinite alternate;
        }
    </style>
</head>
<body class="dark">
    <div id="root"></div>

    <!-- React and ReactDOM CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>


    <script type="text/babel">
        // Ensure all scripts and DOM are loaded before running the React app
        window.onload = () => { 
            const { useState, useEffect, useRef } = React;
            
            // Define icons using emojis or inline SVGs
            const Icon = {
                Info: () => <span>üìú</span>, // Changed from ‚ÑπÔ∏è to üìú
                Lightbulb: () => <span>üí°</span>,
                ListOrdered: () => <span>üìä</span>, // Chart/rankings
                User: () => <span>üë§</span>,
                Zap: () => <span>‚ö°</span>, // For FAQs, can be a question mark too
                Crown: () => <span>üëë</span>,
                ExternalLink: () => <span>üîó</span>,
                Sun: () => <span>‚òÄÔ∏è</span>,
                Moon: () => <span>üåô</span>,
                Shield: () => (
                    <svg className="icon-svg-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                ),
                // New AI icon
                Sparkles: () => <span>‚ú®</span>
            };

            // Gemini API call function with exponential backoff
            async function callGeminiAPI(prompt) {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; // Canvas will automatically provide this
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                let retries = 0;
                const maxRetries = 5;
                const baseDelay = 1000; // 1 second

                while (retries < maxRetries) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            if (response.status === 429 && retries < maxRetries - 1) { // Too Many Requests
                                const delay = baseDelay * Math.pow(2, retries) + Math.random() * 1000; // Add jitter
                                await new Promise(resolve => setTimeout(resolve, delay));
                                retries++;
                                continue;
                            }
                            throw new Error(`API error: ${response.status} ${response.statusText}`);
                        }

                        const result = await response.json();
                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            return result.candidates[0].content.parts[0].text;
                        } else {
                            throw new Error("Unexpected API response structure or no content.");
                        }
                    } catch (error) {
                        console.error("Error calling Gemini API:", error);
                        if (retries < maxRetries - 1) {
                            const delay = baseDelay * Math.pow(2, retries) + Math.random() * 1000; // Add jitter
                            await new Promise(resolve => setTimeout(resolve, delay));
                            retries++;
                        } else {
                            throw error; // Re-throw after max retries
                        }
                    }
                }
                throw new Error("Failed to get response from Gemini API after multiple retries.");
            }


            // Component for the Header
            const Header = ({ serverName, darkMode, setCurrentPage }) => ( // Added setCurrentPage
              <header className={`py-4 px-6 shadow-lg rounded-b-xl ${darkMode ? 'bg-gray-900 text-white' : 'bg-gradient-to-r from-purple-600 to-indigo-700 text-white'}`}>
                <div className="container mx-auto flex justify-between items-center">
                  <h1 className="text-3xl font-extrabold tracking-wide">
                    {serverName}
                  </h1>
                  {/* Back to Menu button */}
                  <button
                    onClick={() => setCurrentPage('menu')} // Go back to main menu
                    className="p-2 rounded-full bg-gray-700 hover:bg-gray-600 text-white transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    aria-label="Back to Menu"
                  >
                    ‚Üê Menu
                  </button>
                </div>
              </header>
            );

            // Component for the Sidebar Navigation
            const Sidebar = ({ activeSection, setActiveSection, darkMode }) => {
              const sections = [
                { name: 'Guidelines', icon: <Icon.Info />, target: 'Guidelines' },
                { name: 'Moderation Tips', icon: <Icon.Lightbulb />, target: 'ModerationTips' },
                { name: 'Rankings', icon: <Icon.ListOrdered />, target: 'Rankings' },
                { name: 'Credits', icon: <Icon.User />, target: 'Credits' },
                { name: 'FAQs', icon: <Icon.Zap />, target: 'FAQs' },
                { name: 'Meetings', icon: <Icon.Crown />, target: 'Meetings' },
              ];

              const aiFeatures = [
                { name: 'Moderation Advice AI', icon: <Icon.Sparkles />, target: 'ModerationAdviceAI' }, // New target
                { name: 'Punishment AI', icon: <Icon.Sparkles />, target: 'PunishmentAI' }, // New target
              ];

              const externalLinks = [
                { name: 'Feedback', icon: <Icon.ExternalLink />, link: 'https://docs.google.com/forms/d/e/1FAIpQLSfAczK9aNTMxdD7wVeyt5ckMDA4QgrCp0ikgsNdlDk-rXhiqg/viewform?usp=dialog' },
                { name: 'Discord', icon: <Icon.ExternalLink />, link: 'https://discord.gg/hcEzHpKu64' },
              ];

              const handleButtonClick = (targetSection) => {
                setActiveSection(targetSection);
                // For main sections, scroll to top of content area
                setTimeout(() => window.document.getElementById('main-content-area')?.scrollTo({ top: 0, behavior: 'smooth' }), 100);
              };

              return (
                <aside className={`w-64 flex-shrink-0 p-6 shadow-lg rounded-r-xl ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-white text-gray-800'}`}>
                  <div className="flex items-center mb-8">
                    <Icon.Shield className={`mr-3 ${darkMode ? 'text-purple-400' : 'text-indigo-600'}`} />
                    <h2 className="text-2xl font-bold">StaffHub</h2>
                  </div>
                  <h3 className="text-lg font-semibold mb-4 border-b pb-2 border-gray-600">Staff Terms</h3>
                  <nav>
                    <ul>
                      {sections.map((section) => (
                        <li key={section.name} className="mb-2">
                          <button
                            onClick={() => handleButtonClick(section.target)}
                            className={`flex items-center w-full px-4 py-2 rounded-lg text-lg font-medium transition-all duration-300 ease-in-out
                              ${activeSection === section.target
                                ? (darkMode ? 'bg-purple-700 text-white shadow-md' : 'bg-indigo-600 text-white shadow-md')
                                : (darkMode ? 'text-gray-300 hover:bg-gray-700 hover:text-white' : 'text-gray-700 hover:bg-gray-100 hover:text-gray-900')
                              }`}
                          >
                            {section.icon}
                            <span className="ml-3">{section.name}</span>
                          </button>
                        </li>
                      ))}
                    </ul>
                  </nav>

                  {/* AI Features Section */}
                  <div className="mt-8 pt-4 border-t border-gray-600">
                    <h3 className="text-lg font-semibold mb-4 border-b pb-2 border-gray-600">AI Features</h3>
                    <nav>
                      <ul>
                        {aiFeatures.map((feature) => (
                          <li key={feature.name} className="mb-2">
                            <button
                              onClick={() => handleButtonClick(feature.target)}
                              className={`flex items-center w-full px-4 py-2 rounded-lg text-lg font-medium transition-all duration-300 ease-in-out
                                ${activeSection === feature.target
                                  ? (darkMode ? 'bg-purple-700 text-white shadow-md' : 'bg-indigo-600 text-white shadow-md')
                                  : (darkMode ? 'text-gray-300 hover:bg-gray-700 hover:text-white' : 'text-gray-700 hover:bg-gray-100 hover:text-gray-900')
                              }`}
                            >
                              {feature.icon}
                              <span className="ml-3">{feature.name}</span>
                            </button>
                          </li>
                        ))}
                      </ul>
                    </nav>
                  </div>

                  {/* Separator for external links */}
                  <div className="mt-8 pt-4 border-t border-gray-600">
                    <h3 className="text-lg font-semibold mb-4 border-b pb-2 border-gray-600">Quick Links</h3>
                    <nav>
                      <ul>
                        {externalLinks.map((linkItem) => (
                          <li key={linkItem.name} className="mb-2">
                            <a
                              href={linkItem.link}
                              target="_blank"
                              rel="noopener noreferrer"
                              className={`flex items-center w-full px-4 py-2 rounded-lg text-lg font-medium transition-all duration-300 ease-in-out
                                ${darkMode ? 'text-gray-300 hover:bg-gray-700 hover:text-white' : 'text-gray-700 hover:bg-gray-100 hover:text-gray-900'}
                              `}
                            >
                              {linkItem.icon}
                              <span className="ml-3">{linkItem.name}</span>
                            </a>
                          </li>
                        ))}
                      </ul>
                    </nav>
                  </div>
                </aside>
              );
            };

            // Moderation Advice AI Content Component
            const ModerationAdviceAIContent = ({ darkMode }) => {
                const [scenarioInput, setScenarioInput] = useState('');
                const [generatedAdvice, setGeneratedAdvice] = useState('');
                const [isGeneratingAdvice, setIsGeneratingAdvice] = useState(false);

                const handleGenerateAdvice = async () => {
                    if (!scenarioInput.trim()) {
                        setGeneratedAdvice("Please describe a scenario to get advice.");
                        return;
                    }
                    setIsGeneratingAdvice(true);
                    setGeneratedAdvice("Generating advice... Please wait.");
                    try {
                        // Modified prompt for shorter response
                        const prompt = `Based on general Discord moderation best practices, provide concise advice for the following scenario, ideally under 600 characters: "${scenarioInput}". Focus on de-escalation, rule enforcement, and maintaining a positive community environment.`;
                        const response = await callGeminiAPI(prompt);
                        setGeneratedAdvice(response);
                    } catch (error) {
                        console.error("Failed to generate advice:", error);
                        setGeneratedAdvice("Failed to generate advice. Please try again later.");
                    } finally {
                        setIsGeneratingAdvice(false);
                    }
                };

                const contentClasses = `p-8 rounded-xl shadow-lg ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-white text-gray-800'}`;
                const headingClasses = `text-3xl font-bold mb-6 ${darkMode ? 'text-purple-400' : 'text-indigo-700'}`;

                return (
                    <div className={contentClasses}>
                        <h2 className={headingClasses}>Moderation Advice AI <Icon.Sparkles /></h2>
                        <p className="mb-4 leading-relaxed">
                            Describe a moderation scenario below, and our AI will provide tailored advice based on best practices.
                        </p>
                        <div className={`mt-8 p-6 rounded-lg shadow-inner ${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>
                            <div className="mb-4">
                                <label htmlFor="scenarioInput" className={`block text-lg font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Describe a moderation scenario:</label>
                                <textarea
                                    id="scenarioInput"
                                    className={`w-full p-3 rounded-md border h-32 ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'}`}
                                    placeholder="e.g., A user is repeatedly baiting arguments but not directly breaking rules. How should I handle it?"
                                    value={scenarioInput}
                                    onChange={(e) => setScenarioInput(e.target.value)}
                                ></textarea>
                            </div>
                            <button
                                onClick={handleGenerateAdvice}
                                disabled={isGeneratingAdvice}
                                className={`w-full py-3 px-6 rounded-lg text-xl font-bold transition-all duration-300 ease-in-out
                                    ${isGeneratingAdvice ? 'bg-gray-500 cursor-not-allowed' : (darkMode ? 'bg-purple-600 hover:bg-purple-500' : 'bg-indigo-600 hover:bg-indigo-500')} text-white shadow-md
                                `}
                            >
                                {isGeneratingAdvice ? 'Generating...' : 'Generate Advice'}
                            </button>
                            {generatedAdvice && (
                                <div className={`mt-4 p-4 rounded-md ${darkMode ? 'bg-gray-700 text-gray-100' : 'bg-gray-100 text-gray-800'}`}>
                                    <h4 className="font-semibold mb-2">Generated Advice:</h4>
                                    <p className="whitespace-pre-wrap">{generatedAdvice}</p>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            // Punishment AI Content Component
            const PunishmentAIContent = ({ darkMode }) => {
                const [offenseType, setOffenseType] = useState('');
                const [offenseDetails, setOffenseDetails] = useState('');
                const [justificationOutput, setJustificationOutput] = useState('');
                const [isGeneratingJustification, setIsGeneratingJustification] = useState(false);

                const handleGenerateJustification = async () => {
                    if (!offenseType.trim() || !offenseDetails.trim()) {
                        setJustificationOutput("Please select an offense type and provide details.");
                        return;
                    }
                    setIsGeneratingJustification(true);
                    setJustificationOutput("Generating justification... Please wait.");
                    try {
                        // Modified prompt for shorter response
                        const prompt = `Draft a concise and professional justification message for a user who committed a "${offenseType}" offense with the following details: "${offenseDetails}". The message should clearly state the action taken and why, without being overly aggressive. Keep the response ideally under 600 characters.`;
                        const response = await callGeminiAPI(prompt);
                        setJustificationOutput(response);
                    } catch (error) {
                        console.error("Failed to generate justification:", error);
                        setJustificationOutput("Failed to generate justification. Please try again later.");
                    } finally {
                        setIsGeneratingJustification(false);
                    }
                };

                const contentClasses = `p-8 rounded-xl shadow-lg ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-white text-gray-800'}`;
                const headingClasses = `text-3xl font-bold mb-6 ${darkMode ? 'text-purple-400' : 'text-indigo-700'}`;

                return (
                    <div className={contentClasses}>
                        <h2 className={headingClasses}>Punishment AI <Icon.Sparkles /></h2>
                        <p className="mb-4 leading-relaxed">
                            Use this tool to generate clear and consistent justification messages for moderation actions.
                        </p>
                        <div className={`mt-8 p-6 rounded-lg shadow-inner ${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>
                            <div className="mb-4">
                                <label htmlFor="offenseType" className={`block text-lg font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Offense Type:</label>
                                <select
                                    id="offenseType"
                                    className={`w-full p-3 rounded-md border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'}`}
                                    value={offenseType}
                                    onChange={(e) => setOffenseType(e.target.value)}
                                >
                                    <option value="">Select an offense</option>
                                    <option value="Spamming">Spamming</option>
                                    <option value="Mild Harassment">Mild Harassment</option>
                                    <option value="Rule Violation">General Rule Violation</option>
                                    <option value="Hate Speech">Hate Speech</option>
                                    <option value="Doxxing">Doxxing</option>
                                    <option value="Trolling">Trolling</option>
                                    <option value="Impersonation">Impersonation</option>
                                </select>
                            </div>
                            <div className="mb-4">
                                <label htmlFor="offenseDetails" className={`block text-lg font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Offense Details:</label>
                                <textarea
                                    id="offenseDetails"
                                    className={`w-full p-3 rounded-md border h-24 ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'}`}
                                    placeholder="e.g., User repeatedly posted offensive memes in #general, ignored warnings."
                                    value={offenseDetails}
                                    onChange={(e) => setOffenseDetails(e.target.value)}
                                ></textarea>
                            </div>
                            <button
                                onClick={handleGenerateJustification}
                                disabled={isGeneratingJustification}
                                className={`w-full py-3 px-6 rounded-lg text-xl font-bold transition-all duration-300 ease-in-out
                                    ${isGeneratingJustification ? 'bg-gray-500 cursor-not-allowed' : (darkMode ? 'bg-purple-600 hover:bg-purple-500' : 'bg-indigo-600 hover:bg-indigo-500')} text-white shadow-md
                                `}
                            >
                                {isGeneratingJustification ? 'Generating...' : 'Generate Justification'}
                            </button>
                            {justificationOutput && (
                                <div className={`mt-4 p-4 rounded-md ${darkMode ? 'bg-gray-700 text-gray-100' : 'bg-gray-100 text-gray-800'}`}>
                                    <h4 className="font-semibold mb-2">Generated Message:</h4>
                                    <p className="whitespace-pre-wrap">{justificationOutput}</p>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            // Animated Triangles Background Component (reusable for other pages)
            const AnimatedTrianglesBackground = ({ darkMode }) => {
                // Determine triangle background color based on dark mode
                const triangleBgColor = darkMode ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';

                // Define triangle properties (size, position, animation delay)
                const triangles = [
                    { width: '80px', height: '80px', top: '10%', left: '15%', animationDelay: '0s' },
                    { width: '60px', height: '60px', top: '30%', right: '10%', animationDelay: '2s', transform: 'rotate(45deg)' },
                    { width: '100px', height: '100px', bottom: '20%', left: '25%', animationDelay: '4s' },
                    { width: '70px', height: '70px', top: '50%', left: '5%', animationDelay: '6s', transform: 'rotate(120deg)' },
                    { width: '90px', height: '90px', bottom: '10%', right: '20%', animationDelay: '8s' },
                    { width: '50px', height: '50px', top: '5%', right: '40%', animationDelay: '10s', transform: 'rotate(200deg)' },
                    { width: '110px', height: '110px', top: '40%', left: '40%', animationDelay: '12s' },
                    // Added more triangles for richer effect
                    { width: '75px', height: '75px', top: '20%', left: '70%', animationDelay: '1s', transform: 'rotate(60deg)' },
                    { width: '85px', height: '85px', bottom: '5%', left: '50%', animationDelay: '3s', transform: 'rotate(150deg)' },
                    { width: '65px', height: '65px', top: '60%', right: '25%', animationDelay: '5s' },
                    { width: '95px', height: '95px', top: '15%', right: '55%', animationDelay: '7s', transform: 'rotate(220deg)' },
                    { width: '55px', height: '55px', bottom: '30%', left: '5%', animationDelay: '9s' },
                    { width: '105px', height: '105px', top: '70%', right: '5%', animationDelay: '11s', transform: 'rotate(300deg)' },
                    { width: '45px', height: '45px', top: '25%', left: '30%', animationDelay: '13s' },
                    { width: '80px', height: '80px', bottom: '40%', right: '40%', animationDelay: '14s', transform: 'rotate(10deg)' },
                    { width: '70px', height: '70px', top: '80%', left: '10%', animationDelay: '15s' },
                    { width: '90px', height: '90px', top: '25%', right: '30%', animationDelay: '16s', transform: 'rotate(90deg)' },
                    { width: '60px', height: '60px', bottom: '15%', left: '70%', animationDelay: '17s' },
                    { width: '110px', height: '110px', top: '5%', left: '50%', animationDelay: '18s', transform: 'rotate(270deg)' },
                    { width: '85px', height: '85px', bottom: '50%', right: '5%', animationDelay: '19s' },
                    { width: '50px', height: '50px', top: '65%', left: '80%', animationDelay: '20s', transform: 'rotate(180deg)' },
                ];

                return (
                    <>
                        {triangles.map((triangle, index) => (
                            <div
                                key={index}
                                className="floating-triangle"
                                style={{
                                    width: triangle.width,
                                    height: triangle.height,
                                    top: triangle.top,
                                    left: triangle.left,
                                    right: triangle.right,
                                    bottom: triangle.bottom,
                                    animationDelay: triangle.animationDelay,
                                    transform: triangle.transform,
                                    background: triangleBgColor, // Dynamic background color
                                }}
                            ></div>
                        ))}
                    </>
                );
            };


            // Component to display dynamic content based on active section
            const ContentDisplay = ({ activeSection, darkMode }) => {
              const contentClasses = `p-8 rounded-xl shadow-lg ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-white text-gray-800'}`;
              const headingClasses = `text-3xl font-bold mb-6 ${darkMode ? 'text-purple-400' : 'text-indigo-700'}`;
              const subHeadingClasses = `text-2xl font-semibold mt-8 mb-4 ${darkMode ? 'text-gray-100' : 'text-gray-700'}`;
              const paragraphClasses = `mb-4 leading-relaxed ${darkMode ? 'text-gray-300' : 'text-gray-600'}`;
              const listClasses = `list-disc list-inside mb-4 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`;

              const renderContent = () => {
                switch (activeSection) {
                  case 'Guidelines':
                    return (
                      <div className={contentClasses}>
                        <h2 className={headingClasses}>Staff Terms And Conditions</h2>

                        <h3 className={subHeadingClasses}>How We Go</h3>
                        <p className={paragraphClasses}>
                          Be respectful and professional with everyone, whether it‚Äôs fellow staff or community members. A good tone and friendly attitude go a long way in building trust and setting the right example.
                        </p>
                        <p className={paragraphClasses}>
                          Keep things confidential. Never share private staff conversations, server logs, or sensitive user information outside the staff team. Confidentiality builds safety and respect.
                        </p>
                        <p className={paragraphClasses}>
                          Steer clear of drama, arguments, or toxic behavior. We want a community where everyone feels welcome and safe. Let your conduct reflect the kind of space you want to be in.
                        </p>
                        <p className={paragraphClasses}>
                          Remember, you are a role model. Your behavior directly impacts the server‚Äôs vibe, member retention, and overall atmosphere.
                        </p>

                        <h3 className={subHeadingClasses}>Dealing with Punishments</h3>
                        <ul className={listClasses}>
                          <li><strong>Warnings:</strong> Use these when a rule is broken for the first time. Explain the rule clearly and give the user a chance to correct their behavior.</li>
                          <li><strong>Mutes:</strong> Apply mutes when warnings are ignored, or for spam, mild harassment, or trolling. Keep it short-term unless behavior continues.</li>
                          <li><strong>Kicks:</strong> Use kicks as a final escalation step for repeat issues or more serious offenses. Always provide a clear reason in the kick message.</li>
                          <li><strong>Bans:</strong> Ban only when the user has committed serious offenses like hate speech, doxxing, or severe toxicity. Document it and notify senior staff.</li>
                        </ul>
                        <p className={paragraphClasses}>
                          Always act calmly, fairly, and clearly. If unsure, always ask a senior team member before taking serious action like banning.
                        </p>
                        <h3 className={subHeadingClasses}>Handling Reports</h3>
                        <p className={paragraphClasses}>
                          Always respond quickly and respectfully to reports. Investigate carefully, gather solid evidence (screenshots, logs), and avoid acting on hearsay alone.
                        </p>
                        <p className={paragraphClasses}>
                          Once resolved, update the reporter if appropriate, and keep all discussions within staff-only channels. Transparency within staff is important; confidentiality outside is critical.
                        </p>

                        <h3 className={subHeadingClasses}>What to Do Daily</h3>
                        <p className={paragraphClasses}>
                          Check on conversations across channels regularly to ensure things stay friendly and rule-abiding. Be helpful to new users and engage positively in chat.
                        </p>
                        <p className={paragraphClasses}>
                          Stay active in staff discussions and participate in team decisions. Help monitor alerts from bots and keep an eye on audit logs.
                        </p>

                        <h3 className={subHeadingClasses}>Chatting with Staff</h3>
                        <ul className={listClasses}>
                          <li>üí¨‚îÉstaff-chat ‚Äì for daily check-ins, coordination, and team help.</li>
                          <li>üì¢‚îÉstaff-announcements ‚Äì for server updates and internal memos.</li>
                          <li>üé≠‚îÉstaff-shitpost ‚Äì to relax, share memes, and keep morale up (without going overboard).</li>
                        </ul>
                        <p className={`${paragraphClasses} italic text-right`}>‚Äî The Admin Team</p>
                      </div>
                    );
                  case 'ModerationTips':
                    return (
                      <div className={contentClasses}>
                        <h2 className={headingClasses}>Moderation Tips</h2>
                        <ul className={listClasses}>
                          <li>üìå Stay calm and neutral when resolving conflicts. Emotion-driven responses often escalate issues.</li>
                          <li>üßæ Log every punishment action in the appropriate staff channel, even if it‚Äôs minor. Transparency is key.</li>
                          <li>üì∑ Collect evidence whenever possible before acting. Screenshots or logs help justify decisions later.</li>
                          <li>üõ†Ô∏è Use available moderation tools like slowmode, mute timers, or auto-responses to ease your workload.</li>
                        </ul>
                      </div>
                    );
                  case 'ModerationAdviceAI': // New case for Moderation Advice AI
                    return <ModerationAdviceAIContent darkMode={darkMode} />;
                  case 'PunishmentAI': // New case for Punishment AI
                    return <PunishmentAIContent darkMode={darkMode} />;
                  case 'Credits':
                    return (
                      <div className={contentClasses}>
                        <h2 className={headingClasses}>Credits</h2>
                        <p className={paragraphClasses}>Site made by <strong className={darkMode ? 'text-purple-300' : 'text-indigo-600'}>arduinoisadev</strong></p>
                        <h3 className={subHeadingClasses}>Staff Team:</h3>
                        <ul className={listClasses}>
                          <li><strong className={darkMode ? 'text-purple-300' : 'text-indigo-600'}>gino12.2</strong> - Admin</li>
                          <li><strong className={darkMode ? 'text-purple-300' : 'text-indigo-600'}>chrismic21</strong> - Head Mod</li>
                          <li><strong className={darkMode ? 'text-purple-300' : 'text-indigo-600'}>nik_bho325</strong> - Owner</li>
                          {/* Add more staff members as needed */}
                        </ul>
                      </div>
                    );
                  case 'FAQs':
                    return (
                      <div className={contentClasses}>
                        <h2 className={headingClasses}>Frequently Asked Questions</h2>
                        <p className={paragraphClasses}>
                          This section will contain answers to common questions staff members might have.
                          <br />
                          (Content to be added here)
                        </p>
                        <h3 className={subHeadingClasses}>Q: How do I report a bug on the server?</h3>
                        <p className={paragraphClasses}>
                          A: Please use the dedicated `#bug-reports` channel in the staff Discord. Provide as much detail as possible, including screenshots or video recordings.
                        </p>
                        <h3 className={subHeadingClasses}>Q: What is the policy on AFK staff members?</h3>
                        <p className={paragraphClasses}>
                          A: Staff members are expected to be active and engaged. If you need to be AFK for an extended period, please notify a senior staff member.
                        </p>
                      </div>
                    );
                  case 'Meetings':
                    return (
                      <div className={contentClasses}>
                        <h2 className={headingClasses}>Meetings</h2>
                        <p className={paragraphClasses}>
                          We host regular meetings to align on moderation standards, review any issues, and discuss ways to improve the server. These are important moments to make your voice heard, bring up suggestions, and learn about upcoming changes.
                        </p>
                        <p className={paragraphClasses}>
                          Always come prepared by reviewing the agenda ahead of time if it's posted. Take notes if needed and ask questions if anything is unclear.
                        </p>
                      </div>
                    );
                  case 'Rankings':
                    return (
                      <div className={contentClasses}>
                        <h2 className={headingClasses}>Staff Rankings</h2>
                        <p className={paragraphClasses}>
                          There are many ranks within the HLH Team, and that's why they are shown here:
                        </p>

                        <h3 className={subHeadingClasses}>STAFF RANKS:</h3>
                        <ul className={listClasses}>
                          <li><strong>Owner:</strong> The Founder of the Discord server, the one in command of everything.</li>
                          <li><strong>Co Owner:</strong> The second owner chosen by the server's founder.</li>
                          <li><strong>Administrator:</strong> A trusted staff member in charge of helping with the server's problems and moderating other members.</li>
                          <li><strong>Senior Moderator:</strong> A professional moderator that is in charge of taking action against members in case of breaking rules (can ban, kick, mute and warn).</li>
                          <li><strong>Moderator:</strong> A regular moderator in charge of taking action against members in case of breaking rules. (can kick, mute and warn)</li>
                          <li><strong>Trial Moderator:</strong> A newbie moderator going through a learning course in the staff team. (can warn and mute)</li>
                          <li><strong>Helper:</strong> A staff member in charge of assisting members and taking care of small rule breakers. (can warn, modify channels, roles etc.)</li>
                        </ul>

                        <h3 className={subHeadingClasses}>HOW TO RANK UP:</h3>
                        <p className={paragraphClasses}>
                          In order to rank up, you must be active and worthy to be promoted.
                        </p>

                        <h3 className={subHeadingClasses}>MINIMUM REQUIREMENTS:</h3>
                        <p className={paragraphClasses}>
                          Must not have gotten at least 3 warns and 3 timeouts in the last week; higher-ups will consider your actions and decide.
                        </p>
                      </div>
                    );
                  default:
                    return (
                      <div className={contentClasses}>
                        <h2 className={headingClasses}>Welcome</h2>
                        <p className={paragraphClasses}>Please select a section from the sidebar.</p>
                      </div>
                    );
                }
              };

              return (
                <div className="flex-grow p-4">
                  {renderContent()}
                </div>
              );
            };

            // Main App Component (This is the Staff Portal layout)
            const App = ({ darkMode, toggleDarkMode, setCurrentPage }) => { // Added setCurrentPage
              const [activeSection, setActiveSection] = useState('Guidelines');
              const mainContentRef = useRef(null);

              const scrollToSection = (id) => {
                const element = document.getElementById(id);
                if (element && mainContentRef.current) {
                  const offset = element.getBoundingClientRect().top - mainContentRef.current.getBoundingClientRect().top;
                  mainContentRef.current.scrollTo({
                    top: offset,
                    behavior: 'smooth'
                  });
                }
              };

              return (
                <div className={`min-h-screen font-inter antialiased flex flex-col relative overflow-hidden
                    ${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>
                    {/* Animated Triangles Background for the entire Staff Portal */}
                    <AnimatedTrianglesBackground darkMode={darkMode} />
                    
                    <div className="relative z-10 flex flex-col flex-1"> {/* Content wrapper with higher z-index */}
                        <Header serverName="HLH Official Staff Portal" darkMode={darkMode} setCurrentPage={setCurrentPage} /> {/* Pass setCurrentPage */}

                        <div className="flex flex-1">
                            <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} darkMode={darkMode} scrollToSection={scrollToSection} />
                            <main id="main-content-area" ref={mainContentRef} className="flex-1 p-4 overflow-y-auto">
                                <ContentDisplay activeSection={activeSection} darkMode={darkMode} />
                            </main>
                        </div>

                        <footer className={`p-5 text-center mt-auto rounded-t-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-800 text-white'}`}>
                            <p>&copy; {new Date().getFullYear()} Humanity's Last Hope | Official. All rights reserved.</p>
                        </footer>
                    </div>
                </div>
              );
            };

            // Menu Screen Component
            const MenuScreen = ({ setCurrentPage, darkMode }) => (
                <div className={`min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden
                    ${darkMode ? 'bg-gradient-to-br from-purple-800 to-indigo-900 text-white' : 'bg-gradient-to-br from-purple-300 to-indigo-400 text-gray-800'}
                    animate-gradient-xy
                `}>
                    {/* Floating Triangles for Menu Screen */}
                    <AnimatedTrianglesBackground darkMode={darkMode} />
                    
                    <h1 className={`text-5xl font-extrabold mb-10 ${darkMode ? 'text-purple-200' : 'text-white'} drop-shadow-lg holographic-text z-10`}>
                        HLH Staff Portal
                    </h1>
                    <div className="flex flex-col space-y-6 w-full max-w-sm z-10"> {/* z-10 to keep buttons above background */}
                        <button
                            onClick={() => setCurrentPage('staffPortal')}
                            className={`w-full py-4 px-6 rounded-lg text-2xl font-bold transition-all duration-300 ease-in-out
                                ${darkMode ? 'bg-purple-700 hover:bg-purple-600 text-white shadow-lg' : 'bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg'}
                            `}
                        >
                            Staff Portal
                        </button>
                        <button
                            onClick={() => setCurrentPage('settings')}
                            className={`w-full py-4 px-6 rounded-lg text-2xl font-bold transition-all duration-300 ease-in-out
                                ${darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-200 shadow-lg' : 'bg-gray-300 hover:bg-gray-400 text-gray-800 shadow-lg'}
                            `}
                        >
                            Settings
                        </button>
                    </div>
                    <div className={`absolute bottom-8 left-0 right-0 text-center text-lg italic ${darkMode ? 'text-gray-300' : 'text-gray-700'} z-10`}>
                        "Unity is strength, when there is teamwork and collaboration, wonderful things can be achieved."
                        <br />
                        ‚Äî Mattie Stepanek
                    </div>
                </div>
            );

            // Settings Screen Component
            const SettingsScreen = ({ setCurrentPage, darkMode, toggleDarkMode, fontSize, setFontSize, fontFamily, setFontFamily }) => ( // Receive font related props
                <div className={`min-h-screen flex flex-col items-center justify-center p-4 ${darkMode ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-800'}`}>
                    <h1 className={`text-5xl font-extrabold mb-10 ${darkMode ? 'text-purple-400' : 'text-indigo-700'}`}>
                        Settings
                    </h1>
                    <div className="flex flex-col space-y-4 w-full max-w-sm mb-8">
                        {/* Dark Mode Toggle */}
                        <div className={`flex items-center justify-between p-4 rounded-lg shadow-md ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                            <span className={`text-xl font-medium ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>Dark Mode</span>
                            <label htmlFor="darkModeToggle" className="relative inline-flex items-center cursor-pointer">
                                <input
                                    type="checkbox"
                                    id="darkModeToggle"
                                    className="sr-only peer"
                                    checked={darkMode}
                                    onChange={toggleDarkMode}
                                />
                                <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"></div>
                            </label>
                        </div>

                        {/* Font Size Adjustment */}
                        <div className={`p-4 rounded-lg shadow-md ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                            <h3 className={`text-xl font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>Font Size</h3>
                            <div className="flex items-center space-x-4">
                                <button
                                    onClick={() => setFontSize(prev => Math.max(12, prev - 1))} // Minimum 12px
                                    className="px-3 py-1 rounded-md bg-gray-600 text-white hover:bg-gray-500 transition-colors"
                                >-</button>
                                <span className={`text-lg font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>{fontSize}px</span>
                                <button
                                    onClick={() => setFontSize(prev => Math.min(20, prev + 1))} // Maximum 20px
                                    className="px-3 py-1 rounded-md bg-gray-600 text-white hover:bg-gray-500 transition-colors"
                                >+</button>
                            </div>
                        </div>

                        {/* Font Family Selection */}
                        <div className={`p-4 rounded-lg shadow-md ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                            <h3 className={`text-xl font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>Font Family</h3>
                            <select
                                value={fontFamily}
                                onChange={(e) => setFontFamily(e.target.value)}
                                className={`w-full p-2 rounded-md border ${darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'} focus:outline-none focus:ring-2 focus:ring-purple-500`}
                            >
                                <option value="Inter, sans-serif">Inter</option>
                                <option value="Roboto, sans-serif">Roboto</option>
                                <option value="Open Sans, sans-serif">Open Sans</option>
                                <option value="Montserrat, sans-serif">Montserrat</option>
                            </select>
                        </div>

                        {/* Reset Settings Button */}
                        <button
                            className={`w-full py-3 px-6 rounded-lg text-xl font-bold transition-all duration-300 ease-in-out
                                ${darkMode ? 'bg-red-700 hover:bg-red-600 text-white shadow-lg' : 'bg-red-500 hover:bg-red-600 text-white shadow-lg'}
                            `}
                        >
                            Reset All Settings
                        </button>
                    </div>
                    <button
                        onClick={() => setCurrentPage('menu')}
                        className={`py-3 px-8 rounded-lg text-xl font-bold transition-all duration-300 ease-in-out
                            ${darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-200 shadow-lg' : 'bg-gray-300 hover:bg-gray-400 text-gray-800 shadow-lg'}
                        `}
                    >
                        Back to Menu
                    </button>
                </div>
            );

            // Main Application Component (handles routing and global state)
            const MainApp = () => {
                const [currentPage, setCurrentPage] = useState('menu'); // Start on the menu screen
                const [darkMode, setDarkMode] = useState(true); // Dark mode is default for the whole app
                const [fontSize, setFontSize] = useState(16); // Default font size
                const [fontFamily, setFontFamily] = useState('Inter, sans-serif'); // Default font family

                // Function to toggle dark mode (passed to all screens)
                const toggleDarkMode = () => {
                    setDarkMode(prevMode => !prevMode);
                };

                // Apply dark mode class, font size, and font family to body
                useEffect(() => {
                    if (darkMode) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                    document.body.style.fontSize = `${fontSize}px`;
                    document.body.style.fontFamily = fontFamily;
                }, [darkMode, fontSize, fontFamily]);

                switch (currentPage) {
                    case 'menu':
                        return <MenuScreen setCurrentPage={setCurrentPage} darkMode={darkMode} />;
                    case 'staffPortal':
                        return <App setCurrentPage={setCurrentPage} darkMode={darkMode} toggleDarkMode={toggleDarkMode} />; // Pass toggleDarkMode and setCurrentPage
                    case 'settings':
                        return <SettingsScreen
                                    setCurrentPage={setCurrentPage}
                                    darkMode={darkMode}
                                    toggleDarkMode={toggleDarkMode}
                                    fontSize={fontSize}
                                    setFontSize={setFontSize}
                                    fontFamily={fontFamily}
                                    setFontFamily={setFontFamily}
                                />;
                    default:
                        return <MenuScreen setCurrentPage={setCurrentPage} darkMode={darkMode} />;
                }
            };

            // Render the MainApp component into the root div
            ReactDOM.createRoot(document.getElementById('root')).render(<MainApp />);
        };
    </script>
</body>
</html>

